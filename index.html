<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="http://getbootstrap.com/favicon.ico">

  <title></title>

  <!-- Bootstrap core CSS -->
  <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="/css/blog.css" rel="stylesheet">
  <link href="/css/cog.css" rel="stylesheet">
</head>
  <body>
<div class="blog-masthead">
  <div class="container">
    <nav class="blog-nav">
      <a class="blog-nav-item active" href="/">Home</a>
<!--
      <a class="blog-nav-item" href="#">New features</a>
      <a class="blog-nav-item" href="#">Press</a>
      <a class="blog-nav-item" href="#">New hires</a>
      <a class="blog-nav-item" href="#">About</a>
-->
    </nav>
  </div>
</div>
    <div class="container">
<div class="blog-header">
  <h1 class="blog-title">The TPF Inline Grant Info Site</h1>
  <p class="lead blog-description">Up to date information on The Perl Foundation's 2014 grant for Inline.pm.</p>
</div>
      <div class="row">
        <div class="col-sm-8 blog-main">
              <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/y9ga.html">Inline Grant Wrap Up (and Christmas Delivery)</a></h2>
  <p class="blog-post-meta">
    December 25, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p><strong>Ho ho ho! Merry Christmas!</strong></p>

<p>Regardless of your holiday faith inclinations, in the <strong>Land of Perl</strong> it&#39;s all about <strong>Christmas</strong>. That&#39;s the day that projects and promises get wrapped up and delivered. Today Ingy and David (döt Claus) deliver you a fresh new <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a>! It&#39;s the culmination of 2 busy months of coding that wraps up our <a href="http://is.gd/YO6LDK">TPF Grant</a> work.</p>

<p>This is the final report for the TPF Inline Grant. It tells of the journey; the good, the bad and the awesome; and ends up with the shiny new gift under your CPAN tree. You also get your fair share of stocking stuffers. Read on!</p>

<h2>Inline::Module</h2>

<p>When David and I started the grant work, we knew what we wanted to accomplish, but we really didn&#39;t know how we were going to do it. We didn&#39;t even know what the new modules would be called. Here&#39;s what we did know:</p>

<ul>
<li>We wanted Inline modules to be on par with XS ones</li>
<li>We wanted no extra dependencies for installation</li>
<li>We wanted to support all common Perl module frameworks</li>
<li>We wanted Inline usage to not change much</li>
<li>We wanted the new framework abstractions to <em>feel right</em></li>
<li>We wanted to support C++ as well as C</li>
</ul>

<p>Two weeks before we began I asked a bunch of smart people at an Amsterdam.pm meeting, how they might go about it. I don&#39;t recall all the ideas that were talked about but I do recall that leont++ was there. Leon ended up being most helpful on several occasions for this project.</p>

<p>Once we started, we quickly settled on making a new helper module called <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a>. All the new logic was added there. We wrote plugins for 3 of the frameworks, but all the logic for them is in Inline::Module.</p>

<p>Inline::Module is less than 500 lines. The plugins are all under 100 lines. The <a href="https://metacpan.org/pod/Inline">Inline</a> module itself required one small change. <a href="https://metacpan.org/pod/Inline::C">Inline::C</a> was not changed at all. <a href="https://metacpan.org/pod/Inline::CPP">Inline::CPP</a> need a few changes to bring it more up to date with Inline::C.</p>

<p>The plan was pretty simple. We needed to modify the <code>build</code> and <code>distdir</code> operations of the module frameworks. We also needed to make sure that a <code>prove -l t/</code> command would trigger a build. That&#39;s pretty easy, because that&#39;s what Inline already does. We just needed to make sure that everything happened at the right times (the same times that an XS build or distdir would do them).</p>

<h2>Mine&#39;s a Stubby, Mate</h2>

<p>The biggest problem was how to make sure that an installed module based on Inline <em>never</em> needed Inline.pm and friends. If you say:</p>

<pre><code>use Inline C =&gt; &lt;code&gt;;
</code></pre>

<p>then you absolutely will load a module called Inline. That&#39;s the way all Inline usage happens (in a <code>use</code> statement), so what could we do?</p>

<p>What if we made up a new convention to replace Inline with a module that sometimes called Inline (during development, testing, and user side compilation) and then only ever called <a href="https://metacpan.org/pod/DynaLoader">DynaLoader</a> after installation (no matter what)? Sounds worth a try, right?</p>

<pre><code>use Your::Module::Inline C =&gt; &lt;code&gt;;
</code></pre>

<p>That&#39;s the new convention. Make a new module by adding <code>::Inline</code> to the end of whatever module is using it. This module will proxy its arguments on to the real Inline (or just call DynaLoader after installed). We call this new module a <strong>stub</strong>. I&#39;m not sure if that&#39;s the best name, but that&#39;s the name we chose.</p>

<p>The stub module is just a few lines long. Actually there are 2 distinct stub forms: the Inline one and the DynaLoader one, and they are both a few boring lines long. So boring that Inline::Module <em>generates</em> them for you.</p>

<p>The explicit way to do it is with this command:</p>

<pre><code>$ perl -MInline::Module=makestub,Your::Module::Inline
Created stub module &#39;lib/Your/Module/Inline.pm&#39; (Inline::Module 0.30)
</code></pre>

<p>Or you can add <code>makestub =&gt; 1</code> to your <code>Makefile.PL</code> and it will keep your stub(s) up to date every time you run it.</p>

<p>We also created a technique called <em>autostubbing</em> that makes an in-memory-only module, so you don&#39;t have the generated code on disk. It requires that you set the <code>PERL5OPT</code> variable a certain way. Looking back, this technique might <em>not</em> be our best practice and we may remove support for it in the future.</p>

<h2>Using Inline::Module</h2>

<p>We really wanted to make sure that this new stuff worked in whatever module framework people wanted to use. <a href="https://metacpan.org/pod/Dist::Zilla">Dist::Zilla</a> is popular these days, but there&#39;s also <a href="https://metacpan.org/pod/Module::Install">Module::Install</a>, <a href="https://metacpan.org/pod/Module::Build">Module::Build</a> and plain old <code>Makefile.PL</code> (<a href="https://metacpan.org/pod/ExtUtils::MakeMaker">ExtUtils::MakeMaker</a>). I (being Ingy) also have a new one that I use exclusively called <a href="https://metacpan.org/pod/Zilla::Dist">Zilla::Dist</a>. <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a> supports them all.</p>

<p>With EU:MM you just <code>use Inline::Module</code> in your <code>Makefile.PL</code>. D:Z, M:B, and M:I all have plugins, since that&#39;s how they work. Z:D support is built-in. Z:D just generates a D:Z <code>dist.ini</code> file from metadata (a <code>Meta</code> file), so effectively it uses the D:Z plugin as well.</p>

<p>All the plugins are simple and do the same things but for their respective frameworks. To make sure that there was no duplicate code, the plugins call methods within Inline::Module to do their work.</p>

<p>Inline::Module just needs 3 things to do its magic:</p>

<ol>
<li>The module(s) that has the inline C/C++ code</li>
<li>The name(s) of the stub(s)</li>
<li>The name of the Inline Language Support Module (ILSM)
<ul>
<li>Inline::C</li>
<li>Inline::CPP</li>
</ul>

</li>
</ol>

<p>The stub names default to appending <code>::Inline</code> to the module names. The ILSM defaults to Inline::C.</p>

<p>In a Makefile.PL you add something like this to the <code>WriteMakefile</code> arguments in your <code>Makefile.PL</code>:</p>

<pre><code>postamble =&gt; &#123;
  inline =&gt; &#123;
    module =&gt; &#39;Acme::Math::XS&#39;,
    stub =&gt; &#39;Acme::Math::XS::Inline&#39;,
    ilsm =&gt; &#39;Inline::C&#39;,
  &#125;,
&#125;,
</code></pre>

<p>With Dist::Zilla, you add the same info to your <code>dist.ini</code> file:</p>

<pre><code>[InlineModule]
module = Acme::Math::XS
stub = Acme::Math::XS::Inline
ilsm = Inline::C
</code></pre>

<p>and so on. Each framework takes the same info.</p>

<p><strong>Re: Module::Build:</strong> There was some push-back from the community to provide support for Module::Build because some people think it is dead, or want to see it die ASAP. I had no opinion one way or the other, but when you have the primary maintainer (leont) hanging out and offering help, why not give it a try? In the end, I found interacting with Module::Build to be a very pleasing experience. Take a look at <a href="http://is.gd/zGhXhl">the code</a>. Not bad, eh?</p>

<h2>Public Displays of Affection</h2>

<p>I love the Perl community because of its fantastic group energy. Nothing is impossible. Everything&#39;s a challenge. I&#39;ve always tried to take the highest, boldest, freshest, and most impossible roads to programming, and no other community is more accommodating than Perl&#39;s.</p>

<p>I also like to push the boundaries of group and public programming. When I got this grant, I wasn&#39;t going to waste the opportunity to push forward on multiple fronts. Even before the project was granted, I decided that /I/ should be <em>we</em>. This is the first TPF project to be granted to a <em>pair</em> of programmers. Hopefully that continues.</p>

<p>But why stop at 2? We wanted to involve as much of the community as possible, and use the most transparent methods we could think of. Not everything we did was a total success, and I&#39;m sure we could have taken it much further but here&#39;s some of the things we tried:</p>

<ul>
<li>Communicate entirely in IRC (irc.perl.org <code>#inline</code>)</li>
<li>Use PairUp™, remote shared server using tmux and weechat</li>
<li>Televise (live stream) the PairUp™ sessions using termcasting</li>
<li>Write weekly blog posts on our progress</li>
<li>Tweet and post to <a href="http://blogs.perl.org">http://blogs.perl.org</a></li>
<li>Notify the Perlweekly newsletter</li>
<li>Continually release to GitHub and use their issues tracker</li>
<li>Invite framework experts (ether, leont, sivoais) into PairUps as needed</li>
</ul>

<p>The IRC channel was a big success. There&#39;s about 20 people in there on average, and they are quite the knowledgeable crew.</p>

<p>PairUp is a technique I&#39;ve used for over a year now to pull unsuspecting IRC/GitHub users into a live coding session. <em>I love everyone. You&#39;re next!</em></p>

<p>We gave up on the termcasting due to numerous technical glitches. I&#39;d like to see it fixed, because it lets anyone watch the live pair programming terminal (but not interact with it). They can then see what we are doing and offer help on IRC. Part of the PairUp terminal is an IRC pane that is always tuned to <code>#inline</code>.</p>

<p>David and I are Inline experts, but we aren&#39;t module framework experts. (I&#39;ve written a few, but I&#39;m no expert). When it came to Dist::Zilla and Module::Build we needed help. We asked for help. We got help. In real time! We invited the framework experts to <code>#inline</code> and asked them what to do. When things went south, we got them into the PairUp session and they set things right within minutes.</p>

<p>A shout-out goes to (at least):</p>

<dl>
<dt>doy</dt>
<dd>Termcast fixes
<dd>
<dt>leont</dt>
<dd>EUMM &amp; M:B help
<dd>
<dt>sivoais</dt>
<dd>Pairing and using I:M
<dd>
<dt>ether</dt>
<dd>dzil help
<dd>
<dt>priodev</dt>
<dd>Always up for a PairUp!
<dd>
<dt>rafl</dt>
<dd>Suggesting XS modules to look at
<dd>
<dt>bingos</dt>
<dd>Fixed BSD/CPANPLUS smoker bug
<dd>
<dt>mohawk</dt>
<dd>Various ideas
<dd>
<dt>bulk88</dt>
<dd>Windows and C expertise
<dd>
<dt>Mithaldu</dt>
<dd>More win32 help
<dd>
<dt>mst</dt>
<dd>For being mst
<br/>

<dd>
</dl>

<h2>Stocking Stuffers</h2>

<p>Building a new Perl framework is only theory. Releasing CPAN modules that use it makes things real. Many modules have been released using Inline::Module.</p>

<p>We started off making a simple XS module called <a href="https://metacpan.org/pod/Acme::Math::XS">Acme::Math::XS</a>. It has <code>add()</code> and <code>subtract()</code> methods/exports. As simple as it gets.</p>

<p>Using the <a href="https://metacpan.org/pod/Alt">Alt</a> methodology, we made 7 <em>Alt</em>ernate versions:</p>

<dl>
<dt><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::EUMM">Alt::Acme::Math::XS::EUMM</a></dt>
<dd><br/>
<p>Version using Inline::Module with a <code>Makefile.PL</code> and <a href="https://metacpan.org/pod/ExtUtils::MakeMaker">ExtUtils::MakeMaker</a>.</p>

<dd>
<dt><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::DistZilla">Alt::Acme::Math::XS::DistZilla</a></dt>
<dd><br/>
<p>Using Inline::Module with <a href="https://metacpan.org/pod/Dist::Zilla">Dist::Zilla</a> and <a href="https://metacpan.org/pod/Dist::Zilla::Plugin::InlineModule">Dist::Zilla::Plugin::InlineModule</a>.</p>

<dd>
<dt><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::ModuleBuild">Alt::Acme::Math::XS::ModuleBuild</a></dt>
<dd><br/>
<p>With <a href="https://metacpan.org/pod/Module::Build">Module::Build</a> and <a href="https://metacpan.org/pod/Module::Build::InlineModule">Module::Build::InlineModule</a>.</p>

<dd>
<dt><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::ModuleInstall">Alt::Acme::Math::XS::ModuleInstall</a></dt>
<dd><br/>
<p>With <a href="https://metacpan.org/pod/Module::Install">Module::Install</a> and <a href="https://metacpan.org/pod/Module::Install::InlineModule">Module::Install::InlineModule</a>.</p>

<dd>
<dt><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::ZillaDist">Alt::Acme::Math::XS::ZillaDist</a></dt>
<dd><br/>
<p>With <a href="https://metacpan.org/pod/Zilla::Dist">Zilla::Dist</a>.</p>

<dd>
<dt><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::CPP">Alt::Acme::Math::XS::CPP</a></dt>
<dd><br/>
<p>Using Inline::Module with <a href="https://metacpan.org/pod/Inline::CPP">Inline::CPP</a> and EUMM.</p>

<dd>
<dt><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::External">Alt::Acme::Math::XS::External</a></dt>
<dd><br/>
<p>Using Inline::Module with an external <code>C</code> file.</p>

<dd>
</dl>

<p>All of these code bases are under one repository, using multiple branches: <a href="https://github.com/ingydotnet/acme-math-xs-pm">https://github.com/ingydotnet/acme-math-xs-pm</a></p>

<p>We also converted David&#39;s Inline::CPP example module <a href="https://metacpan.org/pod/Math::Prime::FastSieve">Math::Prime::FastSieve</a> to <a href="https://metacpan.org/pod/Alt::Math::Prime::FastSieve::Inline">Alt::Math::Prime::FastSieve::Inline</a> and an XS module suggested by Florian Ragwitz, <a href="https://metacpan.org/pod/Devel::GlobalDestruction::XS">Devel::GlobalDestruction::XS</a>, to <a href="https://metacpan.org/pod/Alt::Devel::GlobalDestruction::XS::Inline">Alt::Devel::GlobalDestruction::XS::Inline</a>.</p>

<p>Unexpectedly, other people started using Inline::Module, along the way. I guess that&#39;s what happens when you make new stuff! sivoais++ wrote something very ambitious called <a href="https://metacpan.org/pod/Statistics::NiceR">Statistics::NiceR</a> that uses Inline::C to bind R to Perl. With very few bumps, he was able to use Inline::Module, even before it was done! He wrote a nice post about it <a href="http://enetdown.org/dot-plan/posts/2014/12/24/a_fast_and_natural_interface_to_R_from_Perl/">here</a>.</p>

<p>He (sivoais) also noted this project that is using Inline::Module: <a href="https://github.com/tadegenban/Text-Levenshtein-Inline-pm">https://github.com/tadegenban/Text-Levenshtein-Inline-pm</a></p>

<h2>Testing</h2>

<p>In the past 2.5 years I&#39;ve done a lot of serious Bash programming. I&#39;ve written a full featured Git command that lets you do all your GitHub interaction at the command line, called <a href="https://github.com/ingydotnet/git-hub/">git-hub</a>. This required me (among other things) to write a <a href="https://github.com/ingydotnet/json-bash/">JSON parser in Bash</a>, and to port <a href="https://github.com/ingydotnet/test-more-bash">Test::More to Bash</a>.</p>

<p>Inline::Module is a Perl module, and tests must be in Perl. Or must they? External tests (the ones that go in <code>xt/</code>) could conceivably be in any language. In fact, <code>prove</code> caters to this. It honors the hashbang line of the <code>.t</code> files.</p>

<p>I could have 20 <code>.t</code> test files in 20 different languages and (as long as they had the right hashbang and output proper TAP protocol) they would all work fine with:</p>

<pre><code>prove -lv t/
</code></pre>

<p>For Inline::Module, most of what really needed testing was the human interaction at the commandline and the file system expectations. From experience I knew that expressing this using shell (Bash) is much easier and clearer than trying to do it in Perl.</p>

<p>Take a look at these test files:</p>

<ul>
<li><a href="https://github.com/ingydotnet/inline-module-pm/blob/master/test/devel/test-inline-modules.t">https://github.com/ingydotnet/inline-module-pm/blob/master/test/devel/test-inline-modules.t</a></li>
<li><a href="https://github.com/ingydotnet/inline-module-pm/blob/master/test/devel/test-module.sh">https://github.com/ingydotnet/inline-module-pm/blob/master/test/devel/test-module.sh</a></li>
</ul>

<p>I wanted to make sure that the all known Inline::Module modules got put through a common set of tests. The first file states all the modules, and their specifics. The second file has the Test::More testing in it.</p>

<p>I can&#39;t imagine doing all that more simply in Perl. Not even close. Pull requests to the contrary are welcome. :)</p>

<h2>Swimming the Documentation</h2>

<p>All the modules come with documentation but something big like this really needs a tutorial, so you get one: <a href="https://metacpan.org/pod/Inline::Module::Tutorial">Inline::Module::Tutorial</a>.</p>

<p>We wrote all the doc in a new markup language called <a href="https://metacpan.org/pod/Swim">Swim</a>. Since May 2014, I&#39;ve converted all my Perl Pod doc to Swim. Why?</p>

<p>Pod has a rich model for creating complex, informative, beautiful docs. Much richer than Markdown. So much so, that I really can&#39;t use Markdown. But to make nice looking HTML from Pod, takes a ton of work. Pod syntax sucks. Markdown has decent syntax that people like. Swim has syntax like Markdown (but even better) and produces everything that Pod can. So I write in Swim and publish in Pod. Since GitHub supports Pod (very well in fact) I can even publish Swim (as Pod) to GitHub!</p>

<p>Not only did we write all the doc and the tutorial in Swim, we wrote these blog posts in Swim too, using a new homegrown blog system we cobbled together. It&#39;s all <a href="https://github.com/ingydotnet/inline-cog">here</a>.</p>

<h2>What&#39;s Next?</h2>

<p>This project was a lot of work (100s of hours) but a lot of fun too. I think we&#39;ve set all the balls in motion that we intended, but is the project &quot;done&quot;?</p>

<p>No way! Software projects are never done (done == dead), and this one is no exception. We gave birth to a new life form, but now it needs to grow up. Luckily it has you! The Perl community is the best family to raise a software child.</p>

<p>There are lots of things I can think of to make Inline::Module better. You&#39;ll see these in the forms of GitHub issues and CPAN releases.</p>

<p>Thank you TPF and Perl Community for giving us this opportunity. We hope it is as good for you as it was for us.</p>

<p>Merry Christmas!</p>

<p>Ingy and David</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/u2gc.html">Inline Grant Weekly Report #9</a></h2>
  <p class="blog-post-meta">
    December 20, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p>It&#39;s just days before Christmas.</p>

<p>What happens on Christmas? It&#39;s the when Perl software is <strong>READY</strong>!</p>

<p>What does one do in the days before Christmas? Wrap things up, of course.</p>

<h2>Want a present? Get Inline!</h2>

<p>David and Ingy are trying to be good Santas and get our gifts for all the Perl kids wrapped up in time for the special day. This week the final pieces came together:</p>

<ul>
<li>Module::Build Support</li>
<li>Inline::CPP compiler detection</li>
<li>Lots of testing, debugging and fixes</li>
</ul>

<p><em>You&#39;d better not pout. I&#39;m telling you why... <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a>&#39;s coming to Perl!</em></p>

<p>Be nice!</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/zfp7.html">Inline Grant Weekly Report #8</a></h2>
  <p class="blog-post-meta">
    December 14, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p>This was another big week for Inline::Module and friends. This is the week that modules using Inline::Module start getting out to CPAN. This even includes the first one written by someone, not working directly on the project! Read on.</p>

<h2>So Many Modules!</h2>

<p>This report will be organized by the modules created and updated this week.</p>

<h2>R.pm</h2>

<p>The hacker known as <strong>sivoais</strong> on IRC #inline, started a project to embed the &quot;R&quot; language in Perl. It uses <a href="https://metacpan.org/pod/PDL">PDL</a> and <a href="https://metacpan.org/pod/Inline::C">Inline::C</a>. This week he got the whole thing to work using <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a> and <a href="https://metacpan.org/pod/Dist::Zilla::Plugin::InlineModule">Dist::Zilla::Plugin::InlineModule</a>. It&#39;s not yet shipped to CPAN, but the repo is <a href="https://github.com/zmughal/embedding-r-in-perl-experiment">here</a>.</p>

<p>I suspect it will be on CPAN soon. The <code>dzil build</code> command produces a working dist that has Inline::Module and Inline::C support to do all the XS work easily. That&#39;s what this grant is all about. Thanks sivoais! (aka ZMUGHAL on CPAN)</p>

<h2><a href="https://metacpan.org/pod/Alt::Math::Prime::FastSieve::Inline">Alt::Math::Prime::FastSieve::Inline</a></h2>

<p>David wrote <a href="https://metacpan.org/pod/Math::Prime::FastSieve">Math::Prime::FastSieve</a> a few years ago, to show off using <a href="https://metacpan.org/pod/Inline::CPP">Inline::CPP</a> for a CPAN module. He was able to do it, but it had an <a href="https://metacpan.org/pod/Inline">Inline</a> requirement. (Ditching that requirement is a primary goal of this project).</p>

<p>This week we released it as <a href="https://metacpan.org/pod/Alt::Math::Prime::FastSieve::Inline">Alt::Math::Prime::FastSieve::Inline</a> using the latest <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a>. This required some refactoring of <a href="https://metacpan.org/pod/Inline::CPP">Inline::CPP</a>. See below.</p>

<h2><a href="https://metacpan.org/pod/Inline::CPP">Inline::CPP</a></h2>

<p>We needed to bring <a href="https://metacpan.org/pod/Inline::CPP">Inline::CPP</a> into closer parity with <a href="https://metacpan.org/pod/Inline::C">Inline::C</a> (in the parser department). Basically we moved <a href="https://metacpan.org/pod/Inline::CPP::Grammar">Inline::CPP::Grammar</a> to <a href="https://metacpan.org/pod/Inline::CPP::Parser::RecDescent">Inline::CPP::Parser::RecDescent</a>. This also makes Inline::CPP work with Inline&#39;s <code>using</code> directive.</p>

<p>This let us do the right thing from <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a> and after that <strong>C++</strong> Just Worked™. Note that even though Inline::CPP uses both Inline and Inline::C, no changes were required to those two modules. (No change, is good change).</p>

<h2><a href="https://metacpan.org/pod/Dist::Zilla::Plugin::InlineModule">Dist::Zilla::Plugin::InlineModule</a></h2>

<p>In order for <strong>sivoais</strong> to use Inline::Module, we needed to update the <a href="https://metacpan.org/pod/Dist::Zilla">Dist::Zilla</a> plugin to work with the latest code. Ironically, sivoais himself did most of the work. Ingy pulled him into a realtime PairUp™ session and soon it was done. Dist::Zilla superstar <strong>ether++</strong> helped us find a couple of the deep magic requirements that were needed to make it all work.</p>

<p>The <a href="https://metacpan.org/pod/Dist::Zilla::Plugin::InlineModule">Dist::Zilla::Plugin::InlineModule</a> module ends up being extremely simple though. It just glues <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a> and <a href="https://metacpan.org/pod/Dist::Zilla">Dist::Zilla</a> together with no real special casing for either. The same code that does the right things to an EUMM (or other) dist, does it for Dist::Zilla. This should lead to maintenance happiness down the road.</p>

<h2>Alt::Acme::Math::XS::*</h2>

<p>Our test module <a href="https://metacpan.org/pod/Acme::Math::XS">Acme::Math::XS</a> got released in it&#39;s various forms:</p>

<ul>
<li><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::EUMM">Alt::Acme::Math::XS::EUMM</a></li>
<li><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::DistZilla">Alt::Acme::Math::XS::DistZilla</a></li>
<li><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::ZillaDist">Alt::Acme::Math::XS::ZillaDist</a></li>
<li><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::ModuleInstall">Alt::Acme::Math::XS::ModuleInstall</a></li>
</ul>

<h2>Next Steps</h2>

<p>Our estimate for the grant work was 2 months. Next week will complete 2 full months since we started. We are very close to done, and will try to wrap things up if possible. The things that come to mind are:</p>

<ul>
<li>Module::Build support module for Inline::Module</li>
<li>More tests</li>
<li>More Alt modules</li>
</ul>

<p>Stay tuned!</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/dgq3.html">Inline Grant Weekly Report #7</a></h2>
  <p class="blog-post-meta">
    December 6, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p>This week made great strides for Inline::Module. Last week, we talked about <strong>auto-stubbing</strong>. That&#39;s the automatic generation of little &quot;stub&quot; modules that proxy invocations of <a href="https://metacpan.org/pod/Inline">Inline</a>, so we can write simple code like this:</p>

<pre><code>package My::Module;
use My::Module::Inline C =&gt; &#39;... C code here ...&#39;;
</code></pre>

<p>and have it do all the right things at the right times for <code>My::Module</code>. This obviously means that <code>My::Module::Inline</code> needs to exist somewhere, even though it is just a couple of lines of simple code.</p>

<p>This week auto-stubbing is a reality and it works well! In fact, it turns out that the &quot;stub&quot; module never even needs to exist on disk. Read on!</p>

<h2>Latest Developments</h2>

<p>We got rid of the <code>bin</code> script: <code>perl-inline-module</code> that was used to generate stubs, like this:</p>

<pre><code>perl-inline-module generate Acme::Math::XS::Inline
</code></pre>

<p>We replaced it with a simple one-liner:</p>

<pre><code>perl -MInline::Module=makestub,Acme::Math::XS::Inline
</code></pre>

<p>That will generate the file: <code>lib/Acme/Math/XS/Inline.pm</code>. You can generate it under the <code>blib</code> directory like this:</p>

<pre><code>perl -MInline::Module=makestub,Acme::Math::XS::Inline,blib
</code></pre>

<h2>Auto-Stubbing</h2>

<p>I&#39;d call that <em>Explicit Stubbing</em>. <strong>DON&#39;T DO THAT!</strong></p>

<p>Well you can if you want but the cool new way to use Inline::Module is with <strong>Auto</strong> Stubbing. Here&#39;s how you do it:</p>

<pre><code>export PERL5OPT=-MInline::Module=autostub,Acme::Math::XS::Inline
</code></pre>

<p>Now whenever <code>Acme::Math::XS::Inline</code> is needed in development, it is provided/loaded as a Perl in-memory file object!</p>

<p>You can also auto-stub to disk if you want:</p>

<pre><code>export PERL5OPT=-MInline::Module=autostub,Acme::Math::XS::Inline,blib
</code></pre>

<p>but why would you want to? With the in-memory stubs, you don&#39;t need to worry about an extra file laying around.</p>

<h2><code>blib/Inline/</code></h2>

<p>This is a small change but now all the Inline build time stuff happens under the <code>blib/Inline/</code> directory. We had it building directly under <code>blib/</code> but since that is a well defined concept, it made things confusing.</p>

<p>In general with this project, we are trying to extend Perl coding best-practices in ways that make XS module authoring as simple as possible, while not diverging very far from normal authoring styles.</p>

<h2>Testing</h2>

<p>We started writing tests that can verify all the processes we are imagining. Most of these tests so far are of the <code>xt</code> form. Since almost anything goes in <code>xt</code> I decided to write these tests in Bash instead of Perl. Since these tests are generally of the form: &quot;run this command, in this environment and see if these files exist, etc&quot;, Bash tests make sense.</p>

<p>Some time ago I ported <a href="https://github.com/ingydotnet/test-more-bash">Test::More to Bash</a>. You can run them with <code>prove</code> justlike Perl tests. The <code>prove</code> command just looks at the <em>hashbang</em> line of the <code>.t</code> files and sees that it is Bash, and runs Bash instead. Here&#39;s an <a href="https://github.com/ingydotnet/inline-module-pm/blob/master/test/devel/generate-stub.t">example test file</a>. As you can see it is very simple and easy to understand. If you squint your eyes, it almost looks like Perl!</p>

<h2>Next Steps</h2>

<p>We should be wrapping this Grant project up soon. We still need to:</p>

<ul>
<li>Add Module::Build support</li>
<li>Update all the pluins</li>
<li>Update the docs</li>
<li>Migrate a few real XS modules to Inline::Module</li>
</ul>

<p>Stay tuned. Inline Modules are becoming a reality!</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/n6sv.html">Inline Grant Weekly Report #6</a></h2>
  <p class="blog-post-meta">
    December 1, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p><strong>Happy belated Thanksgiving!!!</strong></p>

<p>Last week was a bit slow on the Inline front. Not much code got done but one important idea came along that (potentially) simplifies the whole Inline::Module dance. We call it <em>auto-stubbing</em>.</p>

<h2>Auto-Stubbing</h2>

<p>When a module has Inline C (or C++) code in it, it needs a <strong>stub</strong> module to invoke Inline and/or dynaload a shared library. This stub is <em>generated code</em>. We had a command for the module auhor to generate it:</p>

<pre><code>perl-inline-module generate Acme::Math::XS::Inline
</code></pre>

<p>and we assumed authors would commit this code, and regenerate it from time to time as Inline::Module required it to change.</p>

<p>(<strong>NOTE:</strong> <em>This is all about author side experience. The user side installation process and result remains the same.</em>)</p>

<p>Last week we called <strong>BS</strong> on that:</p>

<ul>
<li>Generated code should be automagic</li>
<li>Generated code should not get committed if possible</li>
</ul>

<p>We think we figured out how to make this work in a few styles that will fit in with various module author development styles. One of our goals is that when you use Inline::Module, you can test using the pure Perl mantra:</p>

<pre><code>prove -lv t/
</code></pre>

<p>But at this point it is too late to autostub. We need something to happen just before that. One idea is to do this:</p>

<pre><code>PERL5OPT=&#39;-MInline::Module=autostub&#39; prove -lv t/
</code></pre>

<p>or:</p>

<pre><code>export PERL5OPT=&#39;-MInline::Module=autostub&#39;
... later on ...
prove -lv t/
</code></pre>

<p>This adds a CODE ref to <code>@INC</code> to do the autostubbing, just in time.</p>

<p>We&#39;ll have a few ways to do it, so that if you are someone who likes to do everything explicitly, you can still just:</p>

<pre><code>perl-inline-module generate Acme::Math::XS::Inline
</code></pre>

<p>This autostubbing should be done in the next couple days. We&#39;ll let you know how it turned out in the next review.</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/cc8p.html">Inline Grant Weekly Report #5</a></h2>
  <p class="blog-post-meta">
    November 22, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p><strong>Refinement</strong> and <strong>Releases</strong>. Those are the two words I (David) would use to describe what went on this week in the Inline Grant Project.</p>

<h2>Thanks!</h2>

<p>First, we would like to thank those members of the Perl Community who contributed their suggestions, work, and code to the Inline Grant Project. <strong>leont++</strong> presented a strong case (in the form of a cohesive code example) of how to clean up our <code>Makefile.PL</code> by moving work out of a <code>FixupMakefile</code> function, and into a <code>postamble</code> action. Whereas previously the <code>Makefile.PL</code> might have looked like this:</p>

<pre><code>WriteMakefile(
  …
);

FixupMakefile(
  …
);
</code></pre>

<p>Now they look like this:</p>

<pre><code>WriteMakefile(
  …
  postamble =&gt; &#123;
    inline =&gt; &#123; … &#125;,
  &#125;,
);
</code></pre>

<p>which is a lot cleaner because it works within &quot;the Perl toolchain system&quot; instead of layering an additional step into it. This is documented in <a href="https://metacpan.org/pod/Inline::Module::Tutorial">Inline::Module::Tutorial</a>.</p>

<p>We also are receiving help from <strong>ether++</strong> on updating our <a href="https://metacpan.org/pod/Dist::Zilla::Plugin::InlineModule">Dist::Zilla::Plugin::InlineModule</a> plugin to work within this cleaner framework.</p>

<p>Additionally, we released <a href="https://metacpan.org/pod/Module::Install::InlineModule">Module::Install::InlineModule</a>; a plugin to bring <a href="https://metacpan.org/pod/Inline">Inline</a> support to <a href="https://metacpan.org/pod/Module::Install">Module::Install</a> based distributions. So for those keeping score, we now support <a href="https://metacpan.org/pod/ExtUtils::MakeMaker">ExtUtils::MakeMaker</a>, <a href="https://metacpan.org/pod/Dist::Zilla">Dist::Zilla</a>, <a href="https://metacpan.org/pod/Zilla::Dist">Zilla::Dist</a>, and <a href="https://metacpan.org/pod/Module::Install">Module::Install</a> based distributions for <a href="https://metacpan.org/pod/Inline">Inline</a>.</p>

<h2>Modules, Modules, Modules</h2>

<p>We have also released the amazing <a href="https://metacpan.org/pod/Alt::Acme::Math::XS::EUMM">Alt::Acme::Math::XS::EUMM</a> in a new <a href="https://metacpan.org/pod/Module::Install">Module::Install</a> based version. Once again for the benefit of those keeping score, the Inline Grant Project has, to date, spawned eight new modules; some plugins, some proofs of concept, and of course <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a> itself. Additionally, it has directly contributed to new releases of <a href="https://metacpan.org/pod/Inline">Inline</a>, <a href="https://metacpan.org/pod/Inline::CPP">Inline::CPP</a>, <a href="https://metacpan.org/pod/Inline::C">Inline::C</a>, and many other support modules.</p>

<p>This next week we intend to finish revamping the <a href="https://metacpan.org/pod/Dist::Zilla">Dist::Zilla</a> plugin, tackle <a href="https://metacpan.org/pod/Module::Build">Module::Build</a> support, add more tests, and finally convert a couple of pre-existing CPAN modules to Inline-based modules.</p>

<p>It&#39;s gratifying to see the level of enthusiastic support this project has attracted from the Perl Community. We&#39;re seeing more familiar faces in <code>irc.perl.org#inline</code>, receiving more suggestions, and benefiting more from code contributions than ever before.</p>

<p>As we move across the inchstones leading to the wrapping up of the Inline grant project, we are encouraged by the support that we&#39;ve seen, which demonstrates to us that the end of the grant will only be the beginning of the growth and revitalization of the Inline project.</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/mh4x.html">Inline Grant Weekly Report #4</a></h2>
  <p class="blog-post-meta">
    November 15, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p>The major events of this week were:</p>

<ul>
<li>Wrote <a href="https://metacpan.org/pod/Inline::Module::Tutorial">Inline::Module::Tutorial</a></li>
<li>Added Dist::Zilla support for <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a></li>
<li>Added Zilla::Dist support for <a href="https://metacpan.org/pod/Inline::Module">Inline::Module</a></li>
<li>Released 2 new example modules based on the above:
<ul>
<li><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::DistZilla">Alt::Acme::Math::XS::DistZilla</a></li>
<li><a href="https://metacpan.org/pod/Alt::Acme::Math::XS::ZillaDist">Alt::Acme::Math::XS::ZillaDist</a></li>
</ul>

</li>
</ul>

<h2>Inline::Module::Tutorial</h2>

<p>This is a work in progress. It explains how to make an XS module using Inline in very basic, specific terms. It only details what we have implemented so far, although there are stub sections for upcoming things. Please give it a read and let us know what you think (in the form of Issues and/or Pull Requests on <a href="https://github.com/ingydotnet/inline-module-pm">https://github.com/ingydotnet/inline-module-pm</a>).</p>

<h2>Dist::Zilla Support</h2>

<p>This is a fun story.</p>

<p>I(ingy) thought I knew how the Dist::Zilla stuff was going to work… I&#39;d simply add these lines to a <code>dist.ini</code>:</p>

<pre><code>[InlineModule]
module = Acme::Math::XS
inline = Acme::Math::XS::Inline
ilsm = Inline::C
</code></pre>

<p>then write a <a href="https://metacpan.org/pod/Dist::Zilla::Plugin::InlineModule">Dist::Zilla::Plugin::InlineModule</a> and make it all work. In the end that&#39;s exactly what happened, although the path was bumpier than expected.</p>

<p>I started by strolling over to #distzilla on IRC and asking ether++ a few dzil related questions. Then leont++ jumped in and wanted to know what was going on. I told him a bit and he thought I was getting some things wrong… So I invited him to start coding with me (PairUp style)!</p>

<p>It took us a few minutes to get on the same page, but eventually we did. We got some basics into the plugin but then had to break for other stuff. When I came back, I got ether to PairUp for a while. Pretty soon we had a new module, just barely working well enough to release and then release the Acme module based off of it.</p>

<p>TeamProgramming++! Thanks ether++ and leont++!</p>

<h2>Zilla::Dist Support</h2>

<p>Once we got DZ supported, supporting ZD was trivial. The only difference is where the data goes. In this case it goes in the <code>Meta</code> file (where all the meta data does):</p>

<pre><code>=zild:
  inline:
    module: Acme::Math::XS
    inline: Acme::Math::XS::Inline
    ilsm: Inline::C
</code></pre>

<p>Of course, Zilla::Dist uses that info to generate the same <code>dist.ini</code> section above at <code>make release</code> time.</p>

<h2>Talking About My Generation</h2>

<p>It&#39;s a good time to pause, and realize that the whole of programming is pretty much just the <strong>generation</strong> of one thing from another. Programmers might not think about it that way all the time, but I(ngy) tend to <em>only</em> think about it that way.</p>

<p>When I get frustrated by the ways that I need to manage text to make the computer understand my idea, I often step back and think &quot;What is the world I want to be in right now? How would I rather be doing this?&quot;. If I come up with a killer answer that works wonderfully on almost all levels, I make it so.</p>

<p>I&#39;m not sure what drives other folks to make new modules and languages and tools, but that&#39;s a big part of my MO. Inline is like that and Inline::Module is too. What is the minimal info I need to tell the Perl toolchain to Make It So?</p>

<p><code>&lt;/opinion&gt;</code></p>

<h2>The Acme Example Modules</h2>

<p>We&#39;ve rearranged the Acme::Math::XS git repo a bit. See this for details: <a href="https://github.com/ingydotnet/acme-math-xs-pm/blob/master/About.pod">https://github.com/ingydotnet/acme-math-xs-pm/blob/master/About.pod</a></p>

<p>We&#39;ve made Acme::Math::XS::XS become Acme::Math::XS (and deprecated the former). This is the pure (no Inline) version. It s on the <code>xs</code> branch of the repo. All the Inline::Module versions will be released to CPAN using the <code>Alt</code> names listed in the link above.</p>

<p>It is important to release this code as different modules, even though the code is exactly the same. We want to have proof that the modifications to the various build systems actually work in the wild.</p>

<h2>Next Week</h2>

<p>The next big step is definitely writing tests. Doing this type of work Test First would have caused too much churn early on. We needed to experiment and invent a non-trivial process that didn&#39;t exist. Now that we see it clearly, writing tests (and TDD) is the right choice.</p>

<p>We now have real, usable, open source software on GitHub, so the roadmap and problems will start being expressed as Issues: <a href="https://github.com/ingydotnet/inline-module-pm/issues">https://github.com/ingydotnet/inline-module-pm/issues</a></p>

<p>Finally, we need to convert some real XS modules like:</p>

<ul>
<li>Ingy&#39;s <a href="https://metacpan.org/pod/YAML::XS">YAML::XS</a></li>
<li>David&#39;s <a href="https://metacpan.org/pod/Math::Prime::FastSieve">Math::Prime::FastSieve</a></li>
</ul>

<p>to use Inline::Module. This will happen first under the Alt namespace, then once they pass all tests same as the originals, we can make the real ones use Inline::Module.</p>

<p>I encourage interested people to do the same (but maybe wait until next week to start :).</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/m6z3.html">Inline Grant Weekly Report #3</a></h2>
  <p class="blog-post-meta">
    November 9, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p>David and Ingy try to get the weekly report out by Saturday night each week, in order to make the Perl Weekly cut. Last week and this week, Saturday drifted into Sunday. Last week was due to unexpected visitors and this week Ingy was wiped out after his Pittsburgh Perl Workshop talk:</p>

<p><a href="https://www.youtube.com/watch?v=vDRLIjojlhg">https://www.youtube.com/watch?v=vDRLIjojlhg</a></p>

<p>We had several great days of hacking this week. The goal was to get a fully working <code>Acme::Math::XS</code>, with these properties:</p>

<ul>
<li>Implemented with the new <code>Inline::Module</code></li>
<li>Plain old <code>Makefile.PL</code></li>
<li>Perl module with C code &quot;Inline&quot;</li>
<li><code>perl Makefile.PL &amp;&amp; make test</code> works author side</li>
<li><code>prove -lv t/</code> works (the same) author side</li>
<li><code>make dist</code> builds a dist that:
<ul>
<li>Includes Inline::Module build support code (in <code>inc/</code>)</li>
<li>Can build something to install user side, that:
<ul>
<li>Looks just like a normal XS install</li>
<li>Doesn&#39;t need to install Inline</li>
</ul>

</li>
</ul>

</li>
</ul>

<p>This is consistent with what we said we&#39;d do in last week&#39;s report. We got this 90% done, and released a new <code>Acme::Math::XS</code>.</p>

<p>The next steps are:</p>

<ul>
<li>Finish up <code>Inline::Module</code> good enough for a perfect <code>Acme::Math::XS</code></li>
<li>Write tests for the various concerns and expectations</li>
<li>Write up an Inline::Module tutorial</li>
<li>Port different kinds of existing XS modules to Inline::Module</li>
<li>Inline::Module support for common dist frameworks:
<ul>
<li>Dizt::Zilla</li>
<li>Module::Build</li>
<li>etc</li>
</ul>

</li>
<li>Start filing bugs and nits as <a href="https://github.com/ingydotnet/inline-module-pm/issues">GitHub issues on Inline::Module</a></li>
</ul>

<p>After that, the grant goals will be mostly satisfied, and we will finish this one up!</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/ecf6.html">Inline Grant Weekly Report #2</a></h2>
  <p class="blog-post-meta">
    November 2, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p>This week was a little bit slower but we made progress. We released new versions of <code>Acme::Math::XS</code> and created/released <code>Acme::Math::XS::XS</code>. The two modules are the same except the former uses <code>Inline::Module</code> and the latter uses plain old XS. The idea is to get them both working identically so that there is something concrete to compare.</p>

<p>We did a bit of yak shaving early in the week. We wrote our own blog site software that we are growing up organically. We also patched and released <code>Swim.pm</code>, the markup formatter that all our writings are written in. We are trying to balance staying focused on finishing the grant on time, and also spawning as much cool stuff as we can along the way.</p>

<p>Speaking of cool, we do all our work in a shared dev environment called PairUp™. It works wonderfully, but we wanted others to be able to watch along too (televised pair programming). The way to do this is with termcasting which shows the tmux session in a webpage, so anyone can watch along. Combine this with IRC, and it gets awesome. Unfortunately our termcasting setup was failing us. Fortunately we found <code>doy++</code> on IRC, brought him into our pairup, had him fix things (he&#39;s the master of termcasting) and then we got it working. Come by #inline sometime and watch for yourself.</p>

<p>We further honed the Inline::Module dance. I&#39;ll try to explain it. When you create a module like <code>Foo::XS</code>, the <code>lib/Foo/XS.pm</code> module has a line like this:</p>

<pre><code>use Foo::XS::Inline C =&gt; &quot;…&quot;;
</code></pre>

<p>That means you need a <code>lib/Foo/XS/Inline.pm</code>, and you get that with:</p>

<pre><code>&gt; perl-inline-module create Foo::XS::Inline
</code></pre>

<p>The new, generated module looks (more or less) like this:</p>

<pre><code>package Foo::XS::Inline;
use base &#39;Inline&#39;;
use Inline::Module &#39;v1&#39; =&gt; &#39;0.02&#39;;
</code></pre>

<p>When you run tests, this module uses <code>Inline::C</code> to build the <code>C</code> under <code>blib/</code> like normal XS.</p>

<p>Now, here&#39;s the trick (and we haven&#39;t actually gotten it working yet)… when it&#39;s time build the dist we rearrange things:</p>

<ol>
<li>The version of <code>::Inline</code> above goes into the <code>inc/</code> directory</li>
<li>The <code>::Inline</code> under lib becomes a small Dynaloader invoking module
<ul>
<li>This is what gets installed user side</li>
</ul>

</li>
<li>The Makefile system is tweaked to build the Inline code at <code>make</code> time</li>
</ol>

<p>We should get this working in the next couple days. Note that the whole point here is to make something that:</p>

<ul>
<li>Works as good or better than hand-XS</li>
<li>Is easy to distribute using any popular setup</li>
<li>Installs stuff identically to XS</li>
<li>Has <strong>no</strong> user dependencies (including no dep on anything Inline)</li>
</ul>

<p>In other news, David released <code>Inline::CPP</code> five times and got his cpantester&#39;s PASS rate up to an all-time high of 99.4%.</p>
</div>
<hr />
                      <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/se9g.html">Inline Grant Weekly Report #1</a></h2>
  <p class="blog-post-meta">
    October 25, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p>We (David and Ingy) had a productive week bootstrapping the <strong>Inline-for-XS-Modules</strong> project. Our primary optimization flags are:</p>

<pre><code>-Opublic
-Oagile
-Ocreative
-Ofun
</code></pre>

<p>Here are some highlights:</p>

<ul>
<li>All work being done publicly:
<ul>
<li>David and Ingy code in remote <strong>PairUp™</strong> session (tmux)</li>
<li>All realtime communication in <strong>IRC</strong> (irc.perl.org#inline)</li>
<li>Tmux to be <strong>termcast</strong>ed soon (live terminal in a browser)</li>
<li>If you are interested, come join us!</li>
</ul>

</li>
<li>Figured out a decent <strong>Inline Module API</strong> strategy
<ul>
<li>Authors do 3 simple new things to ship Inline code to CPAN</li>
<li><strong>No end-user dependency</strong> on Inline for these modules</li>
<li>End result is essentially same as hand written XS</li>
</ul>

</li>
<li>Plans to support:
<ul>
<li>5-6 build systems: ie <code>Dist::Zilla</code>, <code>Module::Build</code>, etc</li>
<li>Many Inline languages (other than C/C++ <em>might</em> work)</li>
<li>Different extension module use cases: inline/external/libraries</li>
</ul>

</li>
<li>Created specification document: <a href="http://inline.ouistreet.com/node/v3e7.html">http://inline.ouistreet.com/node/v3e7.html</a></li>
<li>Released two new CPAN modules:
<ul>
<li><strong>Inline::Module</strong> (The majority of the grant coding)</li>
<li><strong>Acme::Math::XS</strong> (first test module using Inline::C)</li>
</ul>

</li>
<li>Created a <strong>new blog site</strong> to document the Inline Grant Project
<ul>
<li><a href="http://inline.ouistreet.com/">http://inline.ouistreet.com/</a></li>
<li>A new site using some of our other loved technologies: Cog, Coffee, make, Swim, Jemplate, gh-pages, BootStrap</li>
</ul>

</li>
</ul>

<p>It is our hope to finish out most of the work in the next 2 weeks, and then work on bug reports after that. We plan to keep putting out blog posts/reports for at least a couple months after the grant is complete. We believe this work will make Extension Module Authoring a lot more accessible, and we want to keep the energy flowing.</p>

<p>Here&#39;s a tiny example of how to make an Inline Extension Module. Take this one-liner:</p>

<pre><code>perl -E &#39;use Inline C=&gt;&quot;int add(int a, int b)&#123;return a+b;&#125;&quot;;say add(2,2)&#39;
</code></pre>

<p>Turn it into this module:</p>

<pre><code>package Acme::Math::XS;
our $VERSION = &#39;0.0.1&#39;;
use Acme::Math::XS::Inline C =&gt; &quot;int add(int a, int b) &#123;return a + b;&#125;&quot;;
</code></pre>

<p>Install Inline::Module:</p>

<pre><code>cpanm Inline::Module
</code></pre>

<p>Run this command line:</p>

<pre><code>&gt; perl-inline-module create Acme::Math::XS::Inline
</code></pre>

<p>Add this line to your <code>dist.ini</code>:</p>

<pre><code>[InlineModule]
</code></pre>

<p>Ship it:</p>

<pre><code>dzil release
</code></pre>

<p>One advantage we&#39;ve seen so far is that simple developer testing, just works:</p>

<pre><code>prove -l t/
</code></pre>

<p>There&#39;s no need to run <code>make</code> to build the C/C++/XS in <code>blib</code> and then add <code>-b</code> to the <code>prove</code> flags, because this is <strong>Inline</strong>!</p>
</div>
<hr />
                                  <div class="blog-post">
  <h2 class="blog-post-title"><a href="node/y5yq.html">Inline Grant Accepted</a></h2>
  <p class="blog-post-meta">
    October 20, 2014    by
    <a href="page/ingy-and-david-bio.html">Ingy and David</a>
  </p>
  <p>(or <strong>How I Learned to Stop Worrying and Love The Perl</strong>)</p>

<p>Last week I returned from 3 weeks of adventure in Berlin and Netherland. Funny story… the night I arrived at Liz and Wendy&#39;s place, I was made aware of 2 things:</p>

<ul>
<li>Liz is on the TPF grant board</li>
<li>She had a surprise for me, but couldn&#39;t tell me until midnight :)</li>
</ul>

<p>Spoiler: <a href="http://news.perlfoundation.org/2014/09/grant-proposal-inlinecpp-modul.html">The Inline Grant</a> was approved!</p>

<p>The following evening, I attended the amsterdamx.pm (expats) at Booking.com++ HQ, and upon entering the meeting room, was asked by SawyerX if I could give a talk since ribasushi was stuck in traffic. Huh? WTF? Definitely! :) In the kind of coincidence that only happens regularly in the world of Perl, Karen Pauley happened to be there as well, not to mention Stevan, Jarrko and Dan Kogai! I rambled on about a dozen things that were currently loaded into ingy-RAM, but held off on talking about the grant as it hadn&#39;t been made public just yet.</p>

<p>7 days to the minute later I gave a talk at amsterdam.pm and the main subject was the Inline grant. Instead of a talk, I gave a &quot;listen&quot;! I asked everyone there how they would go about actually implementing the grant solution. I got a lot of ideas, and since then I think I&#39;ve figured it out. Stay tuned…</p>

<h2>Welcome to the Inline Grant blog!</h2>

<p>I think this is the first TPF grant to be given to a pair of pair programmers! David and I want to make things as open as we can, so we plan to give weekly updates in addition to the TPF monthly status updates.</p>

<p>Today (October 20th) marks the start of work in earnest on the grant. The delay is due to my unexpected but most fruitful trip to Europe. I&#39;m dejetlagged and ready to hack! David has also just finished a lovely family vacation (to Zion and Bryce National Parks (YAPC::15 attendees with wheels should take note!)).</p>

<p>We really want to thank the community for this opportunity to make Perl better!</p>
</div>
<hr />
                    </div><!-- /.blog-main -->
<div class="col-sm-3 col-sm-offset-1 blog-sidebar">
  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p>This site has the latest info about the progress of the TPF grant for Inline.pm</p>
  </div>
  <div class="sidebar-module">
  <h4>Posts</h4>
  <ol class="list-unstyled">
    <li><a href="/page/inline-grant-wrap-up-and-christmas-delivery-.html">Inline Grant Wrap Up (and Christmas Delivery)</a></li>
    <li><a href="/page/inline-grant-weekly-report-9.html">Inline Grant Weekly Report #9</a></li>
    <li><a href="/page/inline-grant-weekly-report-8.html">Inline Grant Weekly Report #8</a></li>
    <li><a href="/page/inline-grant-weekly-report-7.html">Inline Grant Weekly Report #7</a></li>
    <li><a href="/page/inline-grant-weekly-report-6.html">Inline Grant Weekly Report #6</a></li>
    <li><a href="/page/inline-grant-weekly-report-5.html">Inline Grant Weekly Report #5</a></li>
    <li><a href="/page/inline-grant-weekly-report-4.html">Inline Grant Weekly Report #4</a></li>
    <li><a href="/page/inline-grant-weekly-report-3.html">Inline Grant Weekly Report #3</a></li>
    <li><a href="/page/inline-grant-weekly-report-2.html">Inline Grant Weekly Report #2</a></li>
    <li><a href="/page/inline-grant-weekly-report-1.html">Inline Grant Weekly Report #1</a></li>
    <li><a href="/page/inline-grant-accepted.html">Inline Grant Accepted</a></li>
  </ol>
  </div>
<!--
  <h4>Archives</h4>
  <ol class="list-unstyled">
    <li><a href="#">October 2014</a></li>
  </ol>
  </div>
-->
<!--
  <div class="sidebar-module">
  <h4>Elsewhere</h4>
  <ol class="list-unstyled">
    <li><a href="#">GitHub</a></li>
    <li><a href="#">Twitter</a></li>
    <li><a href="#">Facebook</a></li>
  </ol>
  </div>
-->
</div><!-- /.blog-sidebar -->

      </div><!-- /.row -->
    </div><!-- /.container -->
<!--
  <div class="blog-footer">
    <p>Blog template built for <a href="http://getbootstrap.com/">Bootstrap</a> by <a href="https://twitter.com/mdo">@mdo</a>.</p>
    <p>
      <a href="#">Back to top</a>
    </p>
  </div>
-->
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>

<!-- Cog JS
================================================== -->
<script src="js/all.js"></script>
  </body>
</html>
