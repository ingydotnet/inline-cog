<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="http://getbootstrap.com/favicon.ico">

  <title>Inline Grant Weekly Report #6</title>

  <!-- Bootstrap core CSS -->
  <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="/css/blog.css" rel="stylesheet">
  <link href="/css/cog.css" rel="stylesheet">
</head>
  <body>
<div class="blog-masthead">
  <div class="container">
    <nav class="blog-nav">
      <a class="blog-nav-item active" href="/">Home</a>
<!--
      <a class="blog-nav-item" href="#">New features</a>
      <a class="blog-nav-item" href="#">Press</a>
      <a class="blog-nav-item" href="#">New hires</a>
      <a class="blog-nav-item" href="#">About</a>
-->
    </nav>
  </div>
</div>
    <div class="container">
<div class="blog-header">
  <h1 class="blog-title"></h1>
  <p class="lead blog-description"></p>
</div>
      <div class="row">
        <div class="col-sm-8 blog-main">
<div class="blog-post">
  <h2 class="blog-post-title">Inline Grant Weekly Report #6</h2>
    <p><strong>Happy belated Thanksgiving!!!</strong></p>

<p>Last week was a bit slow on the Inline front. Not much code got done but one important idea came along that (potentially) simplifies the whole Inline::Module dance. We call it <em>auto-stubbing</em>.</p>

<h2>Auto-Stubbing</h2>

<p>When a module has Inline C (or C++) code in it, it needs a <strong>stub</strong> module to invoke Inline and/or dynaload a shared library. This stub is <em>generated code</em>. We had a command for the module auhor to generate it:</p>

<pre><code>perl-inline-module generate Acme::Math::XS::Inline
</code></pre>

<p>and we assumed authors would commit this code, and regenerate it from time to time as Inline::Module required it to change.</p>

<p>(<strong>NOTE:</strong> <em>This is all about author side experience. The user side installation process and result remains the same.</em>)</p>

<p>Last week we called <strong>BS</strong> on that:</p>

<ul>
<li>Generated code should be automagic</li>
<li>Generated code should not get committed if possible</li>
</ul>

<p>We think we figured out how to make this work in a few styles that will fit in with various module author development styles. One of our goals is that when you use Inline::Module, you can test using the pure Perl mantra:</p>

<pre><code>prove -lv t/
</code></pre>

<p>But at this point it is too late to autostub. We need something to happen just before that. One idea is to do this:</p>

<pre><code>PERL5OPT=&#39;-MInline::Module=autostub&#39; prove -lv t/
</code></pre>

<p>or:</p>

<pre><code>export PERL5OPT=&#39;-MInline::Module=autostub&#39;
... later on ...
prove -lv t/
</code></pre>

<p>This adds a CODE ref to <code>@INC</code> to do the autostubbing, just in time.</p>

<p>We&#39;ll have a few ways to do it, so that if you are someone who likes to do everything explicitly, you can still just:</p>

<pre><code>perl-inline-module generate Acme::Math::XS::Inline
</code></pre>

<p>This autostubbing should be done in the next couple days. We&#39;ll let you know how it turned out in the next review.</p>
</div>
        </div><!-- /.blog-main -->
<div class="col-sm-3 col-sm-offset-1 blog-sidebar">
  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p>This site has the latest info about the progress of the TPF grant for Inline.pm</p>
  </div>
  <div class="sidebar-module">
  <h4>Posts</h4>
  <ol class="list-unstyled">
  </ol>
  </div>
<!--
  <h4>Archives</h4>
  <ol class="list-unstyled">
    <li><a href="#">October 2014</a></li>
  </ol>
  </div>
-->
<!--
  <div class="sidebar-module">
  <h4>Elsewhere</h4>
  <ol class="list-unstyled">
    <li><a href="#">GitHub</a></li>
    <li><a href="#">Twitter</a></li>
    <li><a href="#">Facebook</a></li>
  </ol>
  </div>
-->
</div><!-- /.blog-sidebar -->

      </div><!-- /.row -->
    </div><!-- /.container -->
<!--
  <div class="blog-footer">
    <p>Blog template built for <a href="http://getbootstrap.com/">Bootstrap</a> by <a href="https://twitter.com/mdo">@mdo</a>.</p>
    <p>
      <a href="#">Back to top</a>
    </p>
  </div>
-->
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>

<!-- Cog JS
================================================== -->
<script src="js/all.js"></script>
  </body>
</html>
